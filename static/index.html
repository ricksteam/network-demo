<!doctype html>
<html>

<head>
  <title></title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
  <link href="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" rel="icon"
    type="image/x-icon" />
  <!--tiny.cc/emptyimage-->
  <style>
    /* html {
      height: 100%;
    }

    body {
      height: 100%;
    }

    .flex-container-vertical {
      display: flex;
      flex-direction: column;
      border: 1px solid black;
      height: 100%;
      margin: 2px;


    }

    .flex-container-horizontal {
      display: flex;
      flex-direction: row;
      border: 1px solid blue;
      height: 100%;
      margin: 2px;


    }

    .flex-item {
      flex-grow: 1;
      border: 1px solid red;
      margin: 2px;
    }

    .flex-item-centered {
      flex-grow: 1;
      border: 1px solid green;
      margin: 2px;
      justify-content: center;
      align-content: center;
    }

    button {
      background-image: linear-gradient(to bottom, #e4e4e4, #f7f7f7);
      border: 1px solid #afafaf;
      padding: .1rem;
    }

    textarea {
      width: 100%;
      height: 90%;
      margin: 1rem;
    }

    .rounded {
      border-radius: .5rem;
      border: 1px solid black;
      height: 100%;
    } */
  </style>
</head>

<body>
  <div id='app'>
    <!-- <v-app>
      <div class="flex-container-vertical">
        <div class="flex-item">
          <v-card>
            <v-card-title>
              Input Data
            </v-card-title>
            <v-card-text>
              <v-textarea outlined v-model="inputData">
              </v-textarea>
            </v-card-text>
          </v-card>
          <div class="">
            ↓ <button type="button" @click="sendData()">Send Data</button>
          </div>
        </div>

        <div class="flex-item">
          <div class="flex-container-horizontal">
            <div class="flex-item">
              <div v-html="responseFromOne"></div>
            </div>
            <div class="">
              <div class="flex-container-vertical">
                <div class="flex-item-centered">
                  
                  →
                </div>
                <div class="flex-item-centered">
                  ←
                </div>
                <div class="flex-item-centered">
                  →
                </div>
                <div class="flex-item-centered">
                  ←
                </div>
              </div>
            </div>

            <div class="flex-item">
              <div class="flex-container-vertical">
                <div class="flex-item" v-html="responseFromTwo">

                </div>
                <div class="flex-item" v-html="responseFromThree">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div>
          ↓
        </div>
        <div class="flex-item">
          output
        </div>

      </div>
    </v-app> -->
    <v-app>
      <v-main>
        <v-container>
          <v-row>
            <v-col>
              <v-card>
                <v-card-title>
                  HTML Page
                </v-card-title>
                <v-card-text>
                  <v-textarea v-model="inputData" label="User Input">
                  </v-textarea>
                  <v-container style="background-color:#EEEEEE">
                    <v-row>
                      <v-col>
                        ↓ <v-btn @click="sendData()">Send Data</v-btn> ↓
                      </v-col>
                    </v-row>
                    <v-row>
                      <v-col>

                        <v-card height="100%">
                          <v-card-title>
                            API One
                          </v-card-title>
                          <v-card-text>
                            <v-textarea readonly v-model="responseFromOne" label="Sent to Two">
                            </v-textarea>
                            <v-textarea readonly v-model="responseFromOne" label="Sent to Three">
                            </v-textarea>
                          </v-card-text>
                        </v-card>
                      </v-col>
                      <v-col>
                        <v-container>
                          <v-row>
                            <v-col cols="1">
                              <div>
                                →
                              </div>
                              <div>
                                ←
                              </div>
                            </v-col>
                            <v-col>

                              <v-card>
                                <v-card-title>
                                  API Two
                                </v-card-title>
                                <v-card-text>
                                  <v-textarea readonly v-model="responseFromTwo" label="Response From Two">
                                  </v-textarea>
                                </v-card-text>
                              </v-card>
                            </v-col>
                          </v-row>
                          <v-row>
                            <v-col cols="1">
                              <div>
                                →
                              </div>
                              <div>
                                ←
                              </div>
                            </v-col>
                            <v-col>
                              <v-card>
                                <v-card-title>
                                  API Three
                                </v-card-title>
                                <v-card-text>
                                  <v-textarea readonly v-model="responseFromThree" label="Response From Three">
                                  </v-textarea>
                                </v-card-text>
                              </v-card>
                            </v-col>
                          </v-row>

                        </v-container>
                      </v-col>
                    </v-row>
                    <v-row>
                      <v-col>
                        ↓
                      </v-col>
                    </v-row>
                  </v-container>
                  <v-textarea readonly v-model="outputData" label="Final Output">

                  </v-textarea>
                </v-card-text>
              </v-card>
            </v-col>
          </v-row>
        </v-container>
      </v-main>
    </v-app>
  </div>

  <script src='https://code.jquery.com/jquery-3.2.1.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js'></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>

  <script>

    convoyStart = {
      startLat: 100,
      startLon: 200,
      endLat: 0,
      endLon: -50,
      vehicles: [
        {
          id: 0,
          name: "Big Vehicle",
          maxSpeed: 45,
          weight: 10,
        },
        {
          id: 0,
          name: "Light Vehicle",
          maxSpeed: 65,
          weight: 2,
        }
      ]
    }

    const app = new Vue({
      el: '#app',
      vuetify: new Vuetify(),
      data: {
        inputData: JSON.stringify(convoyStart, null, 2),
        responseData: {},
        outputData:"None",
        rows: [
          {
            name: "One"
          },
          {
            name: "Two"
          }
        ],
      },
      computed: {
        responseFromOne() {
          if (this.responseData?.responseFromOne)
            return JSON.stringify(this.responseData.responseFromOne, null, 2);
          return "NO DATA"
        },
        responseFromTwo() {
          if (this.responseData?.responseFromTwo)
            return JSON.stringify(this.responseData.responseFromTwo, null, 2);
          return "NO DATA"
        },
        responseFromThree() {
          if (this.responseData?.responseFromThree)
            return JSON.stringify(this.responseData.responseFromThree, null, 2);
          return "NO DATA"
        },
      },
      methods: {
        sendData() {
          let self = this;
          data = JSON.parse(this.inputData);
          fetch("/one", {
            method: 'POST',
            body: JSON.stringify(data),
            headers: {
              'Content-Type': 'application/json'
              // 'Content-Type': 'application/x-www-form-urlencoded',
            },
          })
            .then(r => r.json())
            .then(r => {
              console.log(r);
              self.responseData = r;
            })
            .catch(error => {
              console.error(error);
            })
        },

      },
    });

  </script>
</body>

</html>